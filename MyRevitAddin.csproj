<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- ===== General Build Settings ===== -->
  <PropertyGroup>
    <!-- Ensure proper configuration and platform -->
    <Configuration Condition=" '$(Configuration)' == '' ">Release</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x64</Platform>

    <!-- Output library (.dll) -->
    <OutputType>Library</OutputType>

    <!-- Target .NET Framework version (Revit 2025 uses 4.8) -->
    <TargetFrameworkVersion>v4.8</TargetFrameworkVersion>
    <TargetFrameworkProfile />

    <!-- Output and naming -->
    <AssemblyName>MyRevitAddin</AssemblyName>
    <RootNamespace>MyRevitAddin</RootNamespace>
    <OutputPath>bin\Release\</OutputPath>

    <!-- Ensure proper IL and build -->
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <Prefer32Bit>false</Prefer32Bit>
    <PlatformTarget>x64</PlatformTarget>
    <LangVersion>latest</LangVersion>

    <!-- Disable SDK-based behavior on GitHub -->
    <UseMSBuildEngine>MSBuild</UseMSBuildEngine>
  </PropertyGroup>

  <!-- ===== Assembly References ===== -->
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Windows.Forms" />

    <!-- Revit 2025 API references (place these DLLs in repo root or specify absolute paths) -->
    <Reference Include="Autodesk.RevitAPI">
      <HintPath>RevitAPI.dll</HintPath>
      <Private>false</Private>
    </Reference>

    <Reference Include="Autodesk.RevitAPIUI">
      <HintPath>RevitAPIUI.dll</HintPath>
      <Private>false</Private>
    </Reference>
  </ItemGroup>

  <!-- ===== Source Files ===== -->
  <ItemGroup>
    <Compile Include="HelloCommand.cs" />
  </ItemGroup>

  <!-- ===== Build Rules ===== -->
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />

  <!-- Optional: ensure old-style build toolchain -->
  <PropertyGroup>
    <UseSharedCompilation>false</UseSharedCompilation>
  </PropertyGroup>

</Project>
